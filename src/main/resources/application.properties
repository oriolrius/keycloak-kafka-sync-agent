# Quarkus Configuration
quarkus.application.name=keycloak-kafka-sync-agent

# HTTP Server
quarkus.http.port=57010

# Disable DevServices (we use custom configuration)
quarkus.kafka.devservices.enabled=false

# Datasource Configuration (SQLite)
quarkus.datasource.db-kind=sqlite
quarkus.datasource.jdbc.url=jdbc:sqlite:sync-agent.db
quarkus.hibernate-orm.database.generation=none

# Flyway Migration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration

# Kafka Configuration (aligned with testing infrastructure)
# Can be overridden with environment variables: KAFKA_BOOTSTRAP_SERVERS, KAFKA_SECURITY_PROTOCOL, etc.
# PLAINTEXT is available on port 9092 for local testing
# SSL is available on port 57005 (host) -> 9093 (container) in testing infrastructure
kafka.bootstrap-servers=localhost:9092
kafka.security-protocol=PLAINTEXT
kafka.request-timeout-ms=30000
kafka.connection-timeout-ms=10000

# Kafka SASL Configuration (optional, for SASL_SSL or SASL_PLAINTEXT)
# Uncomment and configure when using SASL authentication
#kafka.sasl-mechanism=SCRAM-SHA-512
#kafka.sasl-jaas=org.apache.kafka.common.security.scram.ScramLoginModule required username="admin" password="admin-secret";

# Kafka SSL Configuration (for SSL or SASL_SSL protocols)
# Example for testing infrastructure with SSL:
#kafka.bootstrap-servers=localhost:57005
#kafka.security-protocol=SSL
#kafka.ssl-truststore-location=testing/certs/kafka.truststore.jks
#kafka.ssl-truststore-password=changeit
#kafka.ssl-keystore-location=testing/certs/kafka_broker.keystore.jks
#kafka.ssl-keystore-password=changeit
#kafka.ssl-key-password=changeit

# Keycloak Configuration (aligned with testing infrastructure)
# HTTPS-only on port 57003 (host) -> 8443 (container)
keycloak.url=https://localhost:57003
keycloak.realm=master
keycloak.client-id=admin-cli
#keycloak.admin-username=admin
#keycloak.admin-password=The2password.

# KMS Configuration (optional, for certificate management)
#kms.url=https://localhost:57001

# Metrics
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/metrics
quarkus.micrometer.binder.jvm=true
quarkus.micrometer.binder.system=true
quarkus.micrometer.binder.http-server.enabled=true
quarkus.micrometer.binder-enabled-default=true
quarkus.micrometer.registry-enabled-default=true
# Common tags for all metrics
quarkus.micrometer.export.prometheus.default-registry=true

# Health Checks
quarkus.smallrye-health.ui.enable=true
quarkus.smallrye-health.root-path=/health
quarkus.smallrye-health.liveness-path=/healthz
quarkus.smallrye-health.readiness-path=/readyz

# Logging
quarkus.log.level=INFO
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
